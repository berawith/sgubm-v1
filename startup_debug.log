Iniciando prueba de servidor... 
2026-02-06 09:47:09,105 - src.application.events.event_bus - INFO - Handler subscribed to event: client.created
2026-02-06 09:47:09,106 - src.application.events.event_bus - INFO - Handler subscribed to event: client.suspended
2026-02-06 09:47:09,141 - __main__ - INFO - \u2705 Blueprints registered: dashboard, routers, clients, payments
2026-02-06 09:47:09,181 - src.application.services.monitoring_manager - INFO - MonitoringManager: SocketIO injected
2026-02-06 09:47:09,233 - src.application.services.monitoring_manager - INFO - Started monitoring thread for router 1
2026-02-06 09:47:09,235 - __main__ - INFO - Application started in development mode
2026-02-06 09:47:09,235 - src.application.services.automation_manager - INFO - \U0001f680 AutomationManager: Thread de tareas automáticas iniciado.
2026-02-06 09:47:09,236 - __main__ - INFO - \U0001f680 Real-Time Server starting at http://0.0.0.0:5000 (Debug Mode)
 * Serving Flask app 'run'
 * Debug mode: on
2026-02-06 09:47:09,252 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://12.12.12.75:5000
2026-02-06 09:47:09,252 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-06 09:47:09,252 - werkzeug - INFO -  * Restarting with stat
2026-02-06 09:47:09,310 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.1:8738
2026-02-06 09:47:10,318 - src.application.events.event_bus - INFO - Handler subscribed to event: client.created
2026-02-06 09:47:10,318 - src.application.events.event_bus - INFO - Handler subscribed to event: client.suspended
2026-02-06 09:47:10,355 - __main__ - INFO - \u2705 Blueprints registered: dashboard, routers, clients, payments
2026-02-06 09:47:10,389 - src.application.services.monitoring_manager - INFO - MonitoringManager: SocketIO injected
2026-02-06 09:47:10,435 - src.application.services.monitoring_manager - INFO - Started monitoring thread for router 1
2026-02-06 09:47:10,435 - __main__ - INFO - Application started in development mode
2026-02-06 09:47:10,437 - src.application.services.automation_manager - INFO - \U0001f680 AutomationManager: Thread de tareas automáticas iniciado.
2026-02-06 09:47:10,437 - __main__ - INFO - \U0001f680 Real-Time Server starting at http://0.0.0.0:5000 (Debug Mode)
2026-02-06 09:47:10,447 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 09:47:10,450 - werkzeug - INFO -  * Debugger PIN: 139-065-616
2026-02-06 09:47:10,467 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.1:8738
2026-02-06 09:47:13,700 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:13] "GET /payments HTTP/1.1" 200 -
2026-02-06 09:47:13,792 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:13] "GET /static/css/core.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:13,946 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:13] "GET /static/css/dashboard.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,028 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/routers.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,068 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/clients.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,106 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/toast.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,265 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/modal.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,342 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/payments.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,387 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/plans.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,414 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/css/compact.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,578 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/vendor/css/inter.css HTTP/1.1" 200 -
2026-02-06 09:47:14,665 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/vendor/css/all.min.css HTTP/1.1" 200 -
2026-02-06 09:47:14,696 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/vendor/js/socket.io.min.js HTTP/1.1" 200 -
2026-02-06 09:47:14,730 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/js/app.js?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:47:14,933 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:14] "GET /static/js/modules/dashboard.js HTTP/1.1" 200 -
2026-02-06 09:47:15,031 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/modules/routers.js HTTP/1.1" 200 -
2026-02-06 09:47:15,046 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/modules/clients.js HTTP/1.1" 200 -
2026-02-06 09:47:15,048 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/modules/payments.js HTTP/1.1" 200 -
2026-02-06 09:47:15,052 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1" 200 -
2026-02-06 09:47:15,247 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/modules/plans_manager.js HTTP/1.1" 200 -
2026-02-06 09:47:15,348 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/modules/navigation.js HTTP/1.1" 200 -
2026-02-06 09:47:15,367 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/services/api.service.js HTTP/1.1" 200 -
2026-02-06 09:47:15,368 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/services/event-bus.service.js HTTP/1.1" 200 -
2026-02-06 09:47:15,564 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/components/toast.js HTTP/1.1" 200 -
2026-02-06 09:47:15,663 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/js/components/client-modal.js HTTP/1.1" 200 -
2026-02-06 09:47:15,678 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/vendor/js/socket.io.min.js.map HTTP/1.1" 200 -
2026-02-06 09:47:15,989 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/vendor/webfonts/inter-500.ttf HTTP/1.1" 200 -
2026-02-06 09:47:15,989 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/vendor/webfonts/inter-700.ttf HTTP/1.1" 200 -
2026-02-06 09:47:15,993 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:15] "GET /static/vendor/webfonts/inter-600.ttf HTTP/1.1" 200 -
2026-02-06 09:47:16,019 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /api/routers HTTP/1.1" 200 -
2026-02-06 09:47:16,099 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /api/payments?limit=50 HTTP/1.1" 200 -
2026-02-06 09:47:16,110 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /api/plans HTTP/1.1" 200 -
2026-02-06 09:47:16,231 - __main__ - INFO - \U0001f7e2 Client connected. Active: 1
2026-02-06 09:47:16,302 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /static/vendor/webfonts/inter-400.ttf HTTP/1.1" 200 -
2026-02-06 09:47:16,546 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /static/vendor/webfonts/fa-solid-900.woff2 HTTP/1.1" 200 -
2026-02-06 09:47:16,582 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /api/payments/statistics HTTP/1.1" 200 -
2026-02-06 09:47:16,927 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:47:16] "GET /favicon.ico HTTP/1.1" 200 -
2026-02-06 09:47:19,253 - src.application.services.automation_manager - INFO - \U0001f4c5 AutomationManager: Detectado cambio de día (2026-02-06). Ejecutando ciclo de facturación...
2026-02-06 09:47:19,254 - src.application.services.billing_service - INFO - \U0001f4ca Iniciando Facturación Masiva: 2026-2
2026-02-06 09:47:19,693 - src.application.services.billing_service - INFO - \u2705 Facturación completada: {'created': 0, 'skipped': 517, 'errors': 0}
2026-02-06 09:47:19,693 - src.application.services.automation_manager - INFO - \U0001f4ca AutomationManager: Iniciando captura de snapshots de tráfico (Lectura de Bytes)...
2026-02-06 09:47:19,715 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.1:8738
2026-02-06 09:47:20,437 - src.application.services.automation_manager - INFO - \U0001f4c5 AutomationManager: Detectado cambio de día (2026-02-06). Ejecutando ciclo de facturación...
2026-02-06 09:47:20,437 - src.application.services.billing_service - INFO - \U0001f4ca Iniciando Facturación Masiva: 2026-2
2026-02-06 09:47:20,720 - src.application.services.billing_service - INFO - \u2705 Facturación completada: {'created': 0, 'skipped': 517, 'errors': 0}
2026-02-06 09:47:20,721 - src.application.services.automation_manager - INFO - \U0001f4ca AutomationManager: Iniciando captura de snapshots de tráfico (Lectura de Bytes)...
2026-02-06 09:47:20,769 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.1:8738
2026-02-06 09:47:21,682 - src.application.services.monitoring_manager - INFO - Monitor 1: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:47:22,219 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 1: Actualizado con metadatos del MikroTik.
2026-02-06 09:47:23,055 - src.application.services.monitoring_manager - INFO - Monitor 1: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:47:23,620 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 1: Actualizado con metadatos del MikroTik.
2026-02-06 09:47:41,987 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.1
2026-02-06 09:47:42,986 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.53:8728
2026-02-06 09:47:43,022 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.1
2026-02-06 09:47:43,205 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.53:8728
2026-02-06 09:47:44,957 - src.application.services.monitoring_manager - INFO - Monitor 2: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:47:45,140 - src.application.services.monitoring_manager - INFO - Monitor 2: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:47:45,268 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 2: Actualizado con metadatos del MikroTik.
2026-02-06 09:47:45,467 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 2: Actualizado con metadatos del MikroTik.
2026-02-06 09:47:59,853 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.53
2026-02-06 09:47:59,948 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.53
2026-02-06 09:48:03,359 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.216:8728
2026-02-06 09:48:03,359 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.216:8728
2026-02-06 09:48:19,225 - src.application.services.monitoring_manager - INFO - Monitor 3: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:19,514 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 3: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:24,291 - src.infrastructure.mikrotik.adapter - ERROR - Error getting DHCP leases: timed out
2026-02-06 09:48:24,291 - src.application.services.monitoring_manager - ERROR - Error monitoring clients on router 3: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
Traceback (most recent call last):
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\base_api.py", line 24, in send_sentence
    self.socket.send(full_word)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_socket.py", line 70, in send
    return self.socket.sendall(bytes)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^
OSError: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\SGUBM-V1\src\application\services\monitoring_manager.py", line 353, in get_router_clients_traffic
    queue_stats = adapter._api_connection.get_resource('/queue/simple').get()
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\resource.py", line 7, in get
    return self.call('print', {}, kwargs)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\resource.py", line 38, in call
    return self.call_async(
           ~~~~~~~~~~~~~~~^
        command, arguments=arguments, queries=queries, additional_queries=additional_queries,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).get()
    ^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\resource.py", line 59, in call_async
    promise = self.communicator.call(
        self.path, command, arguments=arguments, queries=queries,
        additional_queries=additional_queries)
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\encoding_decorator.py", line 15, in call
    promise = self.inner.call(
        path, command, arguments, queries, additional_queries)
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\async_decorator.py", line 6, in call
    tag = self.inner.send(*args, **kwargs)
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\exception_decorator.py", line 13, in send
    self.handle_exception(e)
    ~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\exception_decorator.py", line 37, in handle_exception
    raise exception
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\exception_decorator.py", line 11, in send
    return self.inner.send(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\key_cleaner_decorator.py", line 9, in send
    return self.inner.send(
           ~~~~~~~~~~~~~~~^
        path, command, arguments=encoded_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        queries=encoded_queries, additional_queries=additional_queries)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\base.py", line 15, in send
    self.send_command(command)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\api_communicator\base.py", line 32, in send_command
    self.base.send_sentence(command.get_api_format())
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\routeros_api\base_api.py", line 26, in send_sentence
    raise exceptions.RouterOsApiConnectionError(str(e))
routeros_api.exceptions.RouterOsApiConnectionError: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,296 - src.infrastructure.mikrotik.adapter - ERROR - Error getting bulk interface stats: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,297 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.251: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,297 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.254: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,297 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.241: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,297 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.253: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,297 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.247: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,298 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.245: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,298 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.242: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,298 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.240: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,298 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.239: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,299 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.250: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.244: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.246: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.248: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.236: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.252: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.243: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.237: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,300 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.238: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 172.16.10.249: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.7: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.4: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.27: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.5: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.4: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.27: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.8: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,301 - src.infrastructure.mikrotik.adapter - WARNING - Error pinging 192.168.17.5: [WinError 10038] Se intentó realizar una operación en un elemento que no es un socket
2026-02-06 09:48:24,383 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.216
2026-02-06 09:48:24,682 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.122:8728
2026-02-06 09:48:27,903 - src.application.services.monitoring_manager - INFO - Monitor 4: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:28,238 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 4: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:31,798 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.216
2026-02-06 09:48:31,913 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.122:8728
2026-02-06 09:48:33,962 - src.application.services.monitoring_manager - INFO - Monitor 4: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:34,435 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 4: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:37,321 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.122
2026-02-06 09:48:37,372 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.39:8728
2026-02-06 09:48:39,123 - src.application.services.monitoring_manager - INFO - Monitor 5: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:39,388 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 5: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:44,616 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.122
2026-02-06 09:48:44,683 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.39:8728
2026-02-06 09:48:46,287 - src.application.services.monitoring_manager - INFO - Monitor 5: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:46,593 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 5: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:52,631 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.39
2026-02-06 09:48:52,778 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.72:8728
2026-02-06 09:48:53,947 - src.application.services.monitoring_manager - INFO - Monitor 6: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:48:54,095 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 6: Actualizado con metadatos del MikroTik.
2026-02-06 09:48:59,929 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.39
2026-02-06 09:49:00,072 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.72:8728
2026-02-06 09:49:01,033 - src.application.services.monitoring_manager - INFO - Monitor 6: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:49:01,107 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.72
2026-02-06 09:49:01,155 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 6: Actualizado con metadatos del MikroTik.
2026-02-06 09:49:01,275 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.172:8728
2026-02-06 09:49:02,340 - src.application.services.monitoring_manager - INFO - Monitor 7: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:49:02,570 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 7: Actualizado con metadatos del MikroTik.
2026-02-06 09:49:07,720 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.72
2026-02-06 09:49:07,804 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.172:8728
2026-02-06 09:49:07,931 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.172
2026-02-06 09:49:08,890 - src.application.services.monitoring_manager - INFO - Monitor 7: Fetching detailed Last Seen info from Mikrotik...
2026-02-06 09:49:09,088 - src.application.services.monitoring_manager - INFO - \u2705 DB Sync Router 7: Actualizado con metadatos del MikroTik.
2026-02-06 09:49:14,320 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.172
2026-02-06 09:50:47,722 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:47] "GET / HTTP/1.1" 200 -
2026-02-06 09:50:47,753 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:47] "GET /static/css/core.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:47,987 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:47] "GET /static/css/dashboard.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,050 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/toast.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,050 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/routers.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,050 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/clients.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,051 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/modal.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,061 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/payments.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,294 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/plans.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,366 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/css/compact.css?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,368 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/css/all.min.css HTTP/1.1" 200 -
2026-02-06 09:50:48,369 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/css/inter.css HTTP/1.1" 200 -
2026-02-06 09:50:48,375 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/js/app.js?v=1.0.14 HTTP/1.1" 200 -
2026-02-06 09:50:48,378 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/js/socket.io.min.js HTTP/1.1" 200 -
2026-02-06 09:50:48,778 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/webfonts/inter-700.ttf HTTP/1.1" 200 -
2026-02-06 09:50:48,778 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/webfonts/inter-600.ttf HTTP/1.1" 200 -
2026-02-06 09:50:48,779 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/webfonts/inter-500.ttf HTTP/1.1" 200 -
2026-02-06 09:50:48,782 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/webfonts/inter-400.ttf HTTP/1.1" 200 -
2026-02-06 09:50:48,786 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/vendor/webfonts/fa-solid-900.woff2 HTTP/1.1" 200 -
2026-02-06 09:50:48,787 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:48] "GET /static/js/modules/dashboard.js HTTP/1.1" 200 -
2026-02-06 09:50:49,100 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/modules/routers.js HTTP/1.1" 200 -
2026-02-06 09:50:49,102 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/modules/clients.js HTTP/1.1" 200 -
2026-02-06 09:50:49,104 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/modules/payments.js HTTP/1.1" 200 -
2026-02-06 09:50:49,113 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/modules/plans_manager.js HTTP/1.1" 200 -
2026-02-06 09:50:49,118 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/modules/navigation.js HTTP/1.1" 200 -
2026-02-06 09:50:49,122 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/services/api.service.js HTTP/1.1" 200 -
2026-02-06 09:50:49,419 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/services/event-bus.service.js HTTP/1.1" 200 -
2026-02-06 09:50:49,424 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/components/toast.js HTTP/1.1" 200 -
2026-02-06 09:50:49,427 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /static/js/components/client-modal.js HTTP/1.1" 200 -
2026-02-06 09:50:49,770 - __main__ - INFO - \U0001f7e2 Client connected. Active: 2
2026-02-06 09:50:49,777 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /api/activity/recent HTTP/1.1" 200 -
2026-02-06 09:50:49,786 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /api/plans HTTP/1.1" 200 -
2026-02-06 09:50:49,810 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /api/routers HTTP/1.1" 200 -
2026-02-06 09:50:49,837 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "GET /favicon.ico HTTP/1.1" 200 -
2026-02-06 09:50:49,851 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:49] "[35m[1mGET /api/dashboard/stats HTTP/1.1[0m" 500 -
Traceback (most recent call last):
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 1478, in __call__
    return self.wsgi_app(environ, start_response)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask_socketio\__init__.py", line 43, in __call__
    return super(_SocketIOMiddleware, self).__call__(environ,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\engineio\middleware.py", line 74, in __call__
    return self.wsgi_app(environ, start_response)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 1458, in wsgi_app
    response = self.handle_exception(e)
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ~^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 1455, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 869, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ~^^^^^^^^^^^^^^^^^
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 867, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Usuario\AppData\Roaming\Python\Python314\site-packages\flask\app.py", line 852, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\SGUBM-V1\src\presentation\api\dashboard_controller.py", line 108, in get_stats
    print(f"\U0001f4ca DEBUG DASHBOARD: Total={len(clients_raw)}, Active={len(clients_active)}, Suspended={len(clients_suspended)}, OTHERS={other_status_count}")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python314\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4ca' in position 0: character maps to <undefined>
2026-02-06 09:50:50,049 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:50] "GET /api/routers HTTP/1.1" 200 -
2026-02-06 09:50:50,192 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.39:8728
2026-02-06 09:50:50,216 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.39
2026-02-06 09:50:50,262 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.72:8728
2026-02-06 09:50:50,290 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.72
2026-02-06 09:50:50,301 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.172:8728
2026-02-06 09:50:50,340 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.172
2026-02-06 09:50:50,360 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.1:8738
2026-02-06 09:50:50,373 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.1
2026-02-06 09:50:50,458 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.122:8728
2026-02-06 09:50:50,495 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.216:8728
2026-02-06 09:50:50,507 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.122
2026-02-06 09:50:50,576 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.216
2026-02-06 09:50:50,870 - src.infrastructure.mikrotik.adapter - INFO - Connected to MikroTik router at 12.12.12.53:8728
2026-02-06 09:50:51,023 - src.infrastructure.mikrotik.adapter - INFO - Disconnected from 12.12.12.53
2026-02-06 09:50:51,043 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:50:51] "GET /api/routers/monitor HTTP/1.1" 200 -
