<!-- Mis Finanzas ‚Äî Vista del Cobrador -->
<div id="collector-finance-view" class="content-view" style="display:none;">
    <div class="view-header">
        <div class="header-left">
            <h1 class="page-title">üí∞ Mis Finanzas</h1>
            <p class="page-subtitle">Tu resumen de cobranza, ganancia y env√≠os a la empresa.</p>
        </div>
        <div class="header-actions">
            <button class="btn-premium primary" id="cf-register-btn">
                <i class="fas fa-paper-plane"></i> Registrar Env√≠o
            </button>
        </div>
    </div>

    <div class="glass-panel"
        style="padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
        <i class="fas fa-calendar-alt" style="color:#6366f1;"></i>

        <!-- Admin-only Collector Selector -->
        <div id="cf-admin-controls" style="display:none;align-items:center;gap:12px;">
            <label style="font-size:0.85rem;font-weight:600;color:#64748b;">Cobrador:</label>
            <select id="cf-collector-select"
                style="border:1px solid #e2e8f0;border-radius:8px;padding:6px 12px;font-size:0.9rem;color:#334155;min-width:180px;">
                <option value="">Cargando cobradores...</option>
            </select>
            <div style="width:1px;height:24px;background:#e2e8f0;margin:0 8px;"></div>
        </div>

        <label style="font-size:0.85rem;font-weight:600;color:#64748b;">Desde:</label>
        <input type="date" id="cf-start-date"
            style="border:1px solid #e2e8f0;border-radius:8px;padding:6px 12px;font-size:0.9rem;color:#334155;">
        <label style="font-size:0.85rem;font-weight:600;color:#64748b;">Hasta:</label>
        <input type="date" id="cf-end-date"
            style="border:1px solid #e2e8f0;border-radius:8px;padding:6px 12px;font-size:0.9rem;color:#334155;">
        <button class="btn-premium primary" id="cf-filter-btn" style="padding:8px 18px;">
            <i class="fas fa-filter"></i> Actualizar
        </button>
    </div>

    <!-- Summary Cards Row 1 -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px;">

        <!-- Total Cobrado -->
        <div class="glass-panel" style="padding:20px;display:flex;flex-direction:column;gap:6px;">
            <div style="display:flex;align-items:center;gap:10px;">
                <div
                    style="width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(5,150,105,0.2));display:flex;align-items:center;justify-content:center;">
                    <i class="fas fa-coins" style="color:#10b981;font-size:1.1rem;"></i>
                </div>
                <div>
                    <div style="font-size:0.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;">Total Cobrado
                    </div>
                    <div id="cf-total-collected" style="font-size:1.5rem;font-weight:800;color:#1e293b;">$0</div>
                </div>
            </div>
            <div style="font-size:0.8rem;color:#64748b;"><i class="fas fa-receipt" style="margin-right:4px;"></i> <span
                    id="cf-payment-count">0</span> pagos registrados</div>
        </div>

        <!-- Ganancias del Cobrador (Honorarios) -->
        <div class="glass-panel"
            style="padding:20px;display:flex;flex-direction:column;gap:6px;border-left:4px solid #8b5cf6;">
            <div style="display:flex;align-items:center;gap:10px;">
                <div
                    style="width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(124,58,237,0.2));display:flex;align-items:center;justify-content:center;">
                    <i class="fas fa-hand-holding-usd" style="color:#8b5cf6;font-size:1.1rem;"></i>
                </div>
                <div>
                    <div style="font-size:0.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;">Mis Ganancias
                    </div>
                    <div id="cf-earnings" style="font-size:1.5rem;font-weight:800;color:#1e293b;">$0</div>
                </div>
            </div>
            <div style="font-size:0.75rem;color:#64748b;display:flex;gap:8px;flex-wrap:wrap;">
                <span title="Comisi√≥n por porcentaje"><i class="fas fa-percentage" style="color:#8b5cf6;"></i> <span
                        id="cf-profit-pct">0%</span></span>
                <span title="Incentivo/Bono fijo"><i class="fas fa-plus-circle" style="color:#8b5cf6;"></i> <span
                        id="cf-bonus">$0</span></span>
            </div>
            <!-- Desglose por Router (Multi-Router Support) -->
            <div id="cf-earnings-breakdown"
                style="display:none; margin-top:8px; border-top:1px dashed rgba(139,92,246,0.2); padding-top:8px;">
                <!-- Inyectado por JS -->
            </div>
        </div>

        <!-- Efectivo -->
        <div class="glass-panel" style="padding:20px;display:flex;flex-direction:column;gap:6px;">
            <div style="display:flex;align-items:center;gap:10px;">
                <div
                    style="width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(217,119,6,0.2));display:flex;align-items:center;justify-content:center;">
                    <i class="fas fa-money-bill-wave" style="color:#f59e0b;font-size:1.1rem;"></i>
                </div>
                <div>
                    <div style="font-size:0.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;">En Efectivo
                    </div>
                    <div id="cf-cash" style="font-size:1.5rem;font-weight:800;color:#1e293b;">$0</div>
                </div>
            </div>
            <div style="font-size:0.8rem;color:#94a3b8;"><span id="cf-cash-pct">0%</span> del total</div>
        </div>

        <!-- Transferencia -->
        <div class="glass-panel" style="padding:20px;display:flex;flex-direction:column;gap:6px;">
            <div style="display:flex;align-items:center;gap:10px;">
                <div
                    style="width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(79,70,229,0.2));display:flex;align-items:center;justify-content:center;">
                    <i class="fas fa-university" style="color:#6366f1;font-size:1.1rem;"></i>
                </div>
                <div>
                    <div style="font-size:0.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;">Por
                        Transferencia</div>
                    <div id="cf-transfer" style="font-size:1.5rem;font-weight:800;color:#1e293b;">$0</div>
                </div>
            </div>
            <div style="font-size:0.8rem;color:#94a3b8;"><span id="cf-transfer-pct">0%</span> del total</div>
        </div>
    </div>

    <!-- Earnings + Remittance Row -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">

        <!-- Gastos y Descuentos -->
        <div class="glass-panel" style="padding:24px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                <h3
                    style="margin:0;font-size:1rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:8px;">
                    <i class="fas fa-receipt" style="color:#ef4444;"></i> Gastos y Ajustes
                </h3>
                <button class="btn-secondary" id="cf-manage-expenses-btn" style="padding:4px 12px;font-size:0.75rem;">
                    <i class="fas fa-plus"></i> Gestionar
                </button>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div
                    style="text-align:center;padding:14px;background:rgba(239,68,68,0.07);border-radius:12px;border:1px solid rgba(239,68,68,0.15);">
                    <div
                        style="font-size:0.7rem;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px;">
                        Total Gastos</div>
                    <div id="cf-total-expenses" style="font-size:1.4rem;font-weight:900;color:#ef4444;">$0</div>
                </div>
                <div
                    style="text-align:center;padding:14px;background:rgba(239,68,68,0.04);border-radius:12px;border:1px solid rgba(239,68,68,0.1);">
                    <div
                        style="font-size:0.7rem;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px;">
                        Ajustes de Cuadre</div>
                    <div id="cf-expense-count" style="font-size:1.1rem;font-weight:700;color:#ef4444;">0</div>
                </div>
            </div>
            <div id="cf-expenses-preview"
                style="margin-top:12px;font-size:0.75rem;color:#64748b;max-height:60px;overflow:hidden;">
                Cargando gastos...
            </div>
        </div>

        <!-- Env√≠o a Empresa -->
        <div class="glass-panel" style="padding:24px;">
            <h3
                style="margin:0 0 16px;font-size:1rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:8px;">
                <i class="fas fa-building" style="color:#6366f1;"></i> A la Empresa
            </h3>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;">
                <div
                    style="text-align:center;padding:14px;background:rgba(99,102,241,0.07);border-radius:12px;border:1px solid rgba(99,102,241,0.15);">
                    <div
                        style="font-size:0.7rem;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px;">
                        A Enviar</div>
                    <div id="cf-to-send" style="font-size:1.1rem;font-weight:800;color:#6366f1;">$0</div>
                </div>
                <div
                    style="text-align:center;padding:14px;background:rgba(99,102,241,0.07);border-radius:12px;border:1px solid rgba(99,102,241,0.15);">
                    <div
                        style="font-size:0.7rem;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px;">
                        Ya Enviado</div>
                    <div id="cf-sent" style="font-size:1.1rem;font-weight:700;color:#8b5cf6;">$0</div>
                </div>
                <div
                    style="text-align:center;padding:14px;background:rgba(239,68,68,0.07);border-radius:12px;border:1px solid rgba(239,68,68,0.15);">
                    <div
                        style="font-size:0.7rem;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px;">
                        Pendiente</div>
                    <div id="cf-pending" style="font-size:1.2rem;font-weight:800;color:#ef4444;">$0</div>
                </div>
            </div>
            <div style="margin-top:12px;font-size:0.78rem;color:#94a3b8;">
                <i class="fas fa-calendar-check" style="margin-right:4px;color:#6366f1;"></i>
                Primer env√≠o: <strong id="cf-first-date">‚Äî</strong>
            </div>

            <!-- Progress bar -->
            <div style="margin-top:12px;height:6px;background:#f1f5f9;border-radius:10px;overflow:hidden;">
                <div id="cf-sent-bar"
                    style="height:100%;background:linear-gradient(90deg,#6366f1,#8b5cf6);border-radius:10px;width:0%;transition:width 0.5s ease;">
                </div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:0.72rem;color:#94a3b8;margin-top:4px;">
                <span>Enviado: <span id="cf-sent-pct">0%</span></span>
                <span>Faltante</span>
            </div>
        </div>
    </div>

    <!-- Transfer History -->
    <div class="glass-panel" style="padding:20px;">
        <h3
            style="margin:0 0 16px;font-size:1rem;font-weight:700;color:#1e293b;display:flex;align-items:center;gap:8px;">
            <i class="fas fa-history" style="color:#6366f1;"></i> Historial de Env√≠os a la Empresa
        </h3>
        <div class="table-container-premium">
            <table class="premium-data-table">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Monto Enviado</th>
                        <th>M√©todo</th>
                        <th>Saldo Restante / Notas</th>
                    </tr>
                </thead>
                <tbody id="cf-transfers-body">
                    <tr>
                        <td colspan="4" class="loading-cell">
                            <div class="spinner"></div>
                            <p>Cargando...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>