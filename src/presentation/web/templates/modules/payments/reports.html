<!-- REPORTS VIEW (WITH STATISTICS) -->
<div id="reports-view" class="view content-view" style="display: none;">
    <style>
        #report-data-table {
            border-collapse: collapse !important;
            width: 100% !important;
        }

        #report-data-table td {
            padding: 1px 4px !important;
            height: 24px !important;
            vertical-align: middle !important;
            border-bottom: 1px solid #f1f5f9 !important;
        }

        #report-data-table th {
            padding: 4px 6px !important;
            font-size: 0.6rem !important;
        }

        .premium-row {
            height: auto !important;
            min-height: 0 !important;
        }

        .client-report-checkbox {
            transform: scale(0.8) !important;
            margin: 0 !important;
        }

        @media print {
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            .printable-report {
                padding: 0 !important;
                background: transparent !important;
                box-shadow: none !important;
            }

            #report-detailed-analysis>div {
                border: 1px solid #cbd5e1 !important;
                box-shadow: none !important;
            }

            #status-chart-container {
                height: 200px !important;
                /* Slightly larger for print */
                page-break-inside: avoid;
            }

            /* Ensure grids don't collapse too much */
            div[style*="display: grid"] {
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 15px !important;
            }

            div[style*="grid-template-columns: 1fr 1fr"]>div {
                flex: 1 1 45% !important;
            }

            /* Summary Cards in Print */
            div[style*="grid-template-columns: repeat(auto-fit"]>div {
                flex: 1 1 20% !important;
                min-width: 150px !important;
                border: 1px solid #e2e8f0 !important;
                background-color: #f8fafc !important;
                /* Force background */
            }

            /* Fix Analysis Text in Print */
            #report-detailed-analysis p {
                font-size: 9pt !important;
                color: #1e293b !important;
            }

            .no-print {
                display: none !important;
            }
        }
    </style>

    <!-- Unified Premium Header & Control Center (Hidden on Print) -->
    <div class="no-print reports-premium-header"
        style="background: white; border: 1px solid #e2e8f0; border-radius: 16px; padding: 20px; margin-bottom: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); position: relative; z-index: 100;">

        <!-- View Title Section + Action Buttons -->
        <div
            style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; border-bottom: 1px solid #f1f5f9; padding-bottom: 16px;">
            <div>
                <h1
                    style="margin: 0; font-size: 1.5rem; font-weight: 900; color: #0f172a; letter-spacing: -0.02em; display: flex; align-items: center; gap: 10px;">
                    Reportes
                </h1>
                <p style="margin: 4px 0 0 0; color: #64748b; font-size: 0.85rem; font-weight: 600;">Auditoría y
                    Recaudación Financiera</p>
            </div>

            <!-- Global Action Bar -->
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <button class="btn-primary" onclick="app.modules.payments.loadAdvancedFinancialReport()"
                    style="height: 40px; padding: 0 20px; border-radius: 10px; font-size: 0.85rem; font-weight: 800; background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); color: white; border: none; cursor: pointer; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);">
                    <i class="fas fa-chart-pie"></i> ANALIZAR
                </button>

                <button class="btn-primary" onclick="app.modules.payments.loadClientsStatusReport()"
                    style="height: 40px; padding: 0 20px; border-radius: 10px; font-size: 0.85rem; font-weight: 800; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; cursor: pointer; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);">
                    <i class="fas fa-list-ul"></i> LISTAR
                </button>

                <button class="btn-secondary" onclick="window.print()" title="Imprimir Reporte"
                    style="height: 40px; width: 40px; padding: 0; display: flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 1rem; font-weight: 700; background: #f8fafc; border: 1px solid #e2e8f0; color: #475569; cursor: pointer;">
                    <i class="fas fa-print"></i>
                </button>
            </div>
        </div>


        <!-- Toolbar Section (Filters) -->
        <div class="reports-toolbar-premium"
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">

            <!-- Global Filters (Router) -->
            <div class="filter-item-premium" style="display: flex; flex-direction: column; gap: 6px;">
                <label
                    style="font-size: 0.75rem; font-weight: 800; color: #1e293b; text-transform: uppercase; letter-spacing: 0.05em;"><i
                        class="fas fa-server" style="margin-right: 4px; color: #64748b;"></i> Router:</label>
                <select id="report-router-id" class="select-premium"
                    style="width: 100%; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.9rem; font-weight: 600; color: #0f172a; padding: 0 12px; cursor: pointer; transition: all 0.2s; outline: none;">
                    <option value="">TODOS LOS ROUTERS</option>
                </select>
            </div>

            <!-- Financial Analysis Control -->
            <div class="filter-item-premium" style="display: flex; flex-direction: column; gap: 6px;">
                <label
                    style="font-size: 0.75rem; font-weight: 800; color: #1e293b; text-transform: uppercase; letter-spacing: 0.05em;"><i
                        class="fas fa-calendar-alt" style="margin-right: 4px; color: #64748b;"></i> Periodo:</label>
                <select id="report-financial-period" class="select-premium"
                    style="width: 100%; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.9rem; font-weight: 600; color: #0f172a; padding: 0 12px; cursor: pointer; transition: all 0.2s; outline: none;">
                    <option value="annual" selected>Balance Anual</option>
                    <option value="semester">Semestral</option>
                    <option value="quarter">Trimestral</option>
                </select>
            </div>

            <!-- Auditor Lists Control (Audit Type) -->
            <div class="filter-item-premium" style="display: flex; flex-direction: column; gap: 6px;">
                <label
                    style="font-size: 0.75rem; font-weight: 800; color: #1e293b; text-transform: uppercase; letter-spacing: 0.05em;"><i
                        class="fas fa-filter" style="margin-right: 4px; color: #64748b;"></i> Auditoría:</label>
                <select id="report-client-type" class="select-premium"
                    style="width: 100%; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.9rem; font-weight: 600; color: #0f172a; padding: 0 12px; cursor: pointer; transition: all 0.2s; outline: none;">
                    <option value="paid">Día (Al corriente)</option>
                    <option value="missing">Faltas (Sin pago)</option>
                    <option value="debtors" selected>Morosos (Deudores)</option>
                    <option value="deleted">Papelera (Eliminados)</option>
                </select>
            </div>

            <!-- Date Controls -->
            <div class="filter-item-premium" style="display: flex; flex-direction: column; gap: 6px;">
                <label
                    style="font-size: 0.75rem; font-weight: 800; color: #1e293b; text-transform: uppercase; letter-spacing: 0.05em;"><i
                        class="fas fa-clock" style="margin-right: 4px; color: #64748b;"></i> Fecha Auditoría:</label>
                <div style="display: flex; gap: 6px; width: 100%;">
                    <select id="report-audit-day" class="select-premium"
                        style="width: 65px; min-width: 0; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.85rem; font-weight: 600; color: #0f172a; padding: 0 4px; cursor: pointer; text-align: center; outline: none;">
                        <option value="">Hoy</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="report-audit-month" class="select-premium"
                        style="flex: 1; min-width: 0; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.85rem; font-weight: 600; color: #0f172a; padding: 0 4px; cursor: pointer; outline: none;">
                        <option value="1">Ene</option>
                        <option value="2">Feb</option>
                        <option value="3">Mar</option>
                        <option value="4">Abr</option>
                        <option value="5">May</option>
                        <option value="6">Jun</option>
                        <option value="7">Jul</option>
                        <option value="8">Ago</option>
                        <option value="9">Sep</option>
                        <option value="10">Oct</option>
                        <option value="11">Nov</option>
                        <option value="12">Dic</option>
                    </select>
                    <select id="report-audit-year" class="select-premium"
                        style="width: 75px; min-width: 0; height: 42px; border-radius: 10px; border: 1px solid #cbd5e1; background-color: #f8fafc; font-size: 0.85rem; font-weight: 600; color: #0f172a; padding: 0 4px; cursor: pointer; outline: none;">
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026" selected>2026</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Elegant Print Header (Only visible on Print) -->
    <div class="print-header">
        <div style="padding-bottom: 20px; margin-bottom: 30px; text-align: center;">
            <p id="print-report-title"
                style="margin: 0; font-size: 18pt; color: #0f172a; font-weight: 950; text-transform: uppercase; letter-spacing: 2px;">
            </p>
            <div style="width: 80px; height: 4px; background: #6366f1; margin: 15px auto;"></div>
            <p style="margin: 5px 0 0 0; font-size: 10pt; color: #64748b; font-weight: 600;">GENERADO EL: <span
                    id="print-current-date"></span></p>

            <!-- New Print Stats Header -->
            <div id="print-stats-header" style="display: flex; gap: 20px; justify-content: center; margin-top: 15px;">
            </div>
        </div>
    </div>

    <!-- Results Section -->
    <div id="report-results-container" class="printable-report"
        style="padding: 15px; background: white; border-radius: 12px; min-height: 400px; margin-bottom: 24px;">

        <div id="report-initial-placeholder" class="no-print"
            style="text-align: center; padding: 80px 0; color: #94a3b8;">
            <i class="fas fa-file-invoice-dollar"
                style="font-size: 3rem; opacity: 0.2; margin-bottom: 15px; display: block;"></i>
            <h4 style="font-weight: 700; color: #64748b;">Seleccione un reporte para analizar</h4>
            <p style="font-size: 0.8rem;">Los resultados se mostrarán listos para impresión.</p>
        </div>

        <div id="report-data-content" style="display: none;">
            <div id="report-table-header" style="margin-bottom: 15px;"></div>

            <div id="report-table-view" class="table-responsive-premium">
                <table class="premium-table" id="report-data-table" style="width: 100%; border-collapse: collapse;">
                    <thead id="report-table-head"></thead>
                    <tbody id="report-table-body"></tbody>
                </table>
            </div>

            <div id="report-cards-grid" class="cards-grid-premium"
                style="display: none; grid-template-columns: 1fr; gap: 12px;">
                <!-- Cards rendered by JS -->
            </div>

            <div id="report-footer-stats" style="margin-top: 20px; padding-top: 15px;"></div>
        </div>
    </div>

</div>